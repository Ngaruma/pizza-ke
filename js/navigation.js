/**
 * Theme navigation JavaScript
 *
 * @package Pizza_Ke
 * @since 1.0.0
 */

(function() {
    'use strict';

    // Mobile menu toggle
    const menuToggle = document.querySelector('.menu-toggle');
    const navigation = document.querySelector('.main-navigation');

    if (menuToggle && navigation) {
        menuToggle.addEventListener('click', function() {
            const expanded = this.getAttribute('aria-expanded') === 'true';
            this.setAttribute('aria-expanded', !expanded);
            navigation.classList.toggle('toggled');
        });
    }

    // Smooth scrolling for anchor links
    const anchorLinks = document.querySelectorAll('a[href^="#"]');
    anchorLinks.forEach(function(link) {
        link.addEventListener('click', function(e) {
            const href = this.getAttribute('href');
            if (href === '#') return;
            
            const target = document.querySelector(href);
            if (target) {
                e.preventDefault();
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Search form enhancements
    const searchForms = document.querySelectorAll('.search-form');
    searchForms.forEach(function(form) {
        const searchField = form.querySelector('.search-field');
        if (searchField) {
            searchField.addEventListener('focus', function() {
                this.parentElement.classList.add('focused');
            });
            
            searchField.addEventListener('blur', function() {
                this.parentElement.classList.remove('focused');
            });
        }
    });

    // Back to top functionality
    const backToTop = document.createElement('button');
    backToTop.innerHTML = 'â†‘';
    backToTop.className = 'back-to-top';
    backToTop.setAttribute('aria-label', 'Back to top');
    document.body.appendChild(backToTop);

    backToTop.addEventListener('click', function() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    });

    window.addEventListener('scroll', function() {
        if (window.pageYOffset > 100) {
            backToTop.classList.add('visible');
        } else {
            backToTop.classList.remove('visible');
        }
    });

})();